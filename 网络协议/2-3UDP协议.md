# UDP协议

### TCP和UDP协议的区别
TCP是面向连接的，UDP是无连接的
在互通之前，面向连接的协议会先建立连接。例如，TCP 会三次握手，而 UDP 不会。
TCP 提供可靠交付。通过 TCP 连接传输的数据，无差错、不丢失、不重复、并且按序到达。而 UDP 继承了 IP 包的特性，不保证不丢失，不保证按顺序到达。

TCP 是面向字节流的，而 UDP 继承了 IP 的特性，基于数据报的，一个一个地发，一个一个地收。

当包丢弃或者网络环境不好时， TCP 是可以有拥塞控制的。UDP 不会，应用让我发，我就发。

### UDP包头
![](https://kkhungry-1252400385.cos.ap-shanghai.myqcloud.com/6d1313f51b9dfd7ab454b2cef1cb37bf.jpg)

### UDP三大特点
1. 简单，默认会被送达，不会被丢弃
2. 无需建立连接。虽然有端口号，但是监听在这个地方，谁都可以传给他数据，他也可以传给任何人数据，甚至可以同时传给多个人数据
3. 不会根据网络的情况进行发包的拥塞控制，无论网络丢包丢成啥样了，它该怎么发还怎么发
### UDP使用的三大场景
1. 需要资源少，在网络情况比较好的内网，或者对于丢包不敏感的应用
2. 不需要一对一沟通，建立连接，而是可以广播的应用
3. 需要处理速度快，时延低，可以容忍少数丢包，但是要求即便网络拥塞，也毫不退缩，一往无前的时候

### UDP实际应用
1. QUIC （全称 Quick UDP Internet Connections，快速 UDP 互联网连接）
2. 流媒体的协议（直播）
3. 实时游戏
4. IoT 物联网
5. 移动通信领域

## 思考题
1. 都说 TCP 是面向连接的，在计算机看来，怎么样才算一个连接呢？
TCP/UDP建立连接的本质就是在客户端和服务端各自维护一定的数据结构（一种状态机），来记录和维护这个“连接”的状态 。并不是真的会在这两个端之间有一条类似“网络专线”这么一个东西。


2. TCP 的连接是如何建立，又是如何关闭的
建立连接：三次握手
关闭连接：四次挥手